<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- bootstrap cdn -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <style>
    .t-shirt {
   
      
       pointer-events: auto;
      width: calc(293px *2);
      height: calc(277px *2);
      min-height: 355px; 
    }
    #-costmise{
    border: 1px solid black;
    position: absolute;
    left: 184px;
    top: 117px;
    }
    .canvas-container{
      top: 108px;
      left: 170px;
    }
    
  </style>
    <title>Document</title>
  </head>
  <body>
    <nav class="navbar navbar-light bg-dark">
      <div class="container-fluid">
        <a class="navbar-brand text-white" href="#">
          
          MedPrint
        </a>
      </div>
    </nav>
    <div class="container mt-5" style="background-color: #F6F6F9;">
        <div class="row">
          <div class="col-lg-6">
            <div class="column">
            <div>
              <h4 class="h4 text-uppercase p-2">design your product</h4>
            </div>
              
              <button class="btn btn-primary" type="button" data-bs-toggle="collapse" data-bs-target="#addText" aria-expanded="false" aria-controls="collapseExample">
                Add Text
              </button>
              <div class="collapse mt-5 pt-5" id="addText">
                <div class="card card-body">
                  Some placeholder content for the collapse component. This panel is hidden by default but revealed when the user activates the relevant trigger.
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-6"  style="position: relative;">
         
            <img style="border: 1px solid black;position:absolute;background: black" width="756"  height="756" class="t-shirt " src="https://d3vvxc53hv5hl7.cloudfront.net/unisex_tees/product_template_nl_triblend_tee_front.png" alt="" srcset="">
            <canvas id="-costmise"  style="border: 1px dotted grey;position:absolute;" >

            </canvas>
          </div>
        </div>
      </div>





      <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/460/fabric.min.js" integrity="sha512-ybPp3kCrNQXdvTfh99YLIdnajWnQvHuEKDJ+b26mxI9w+pLhnBo3HmNLJ1pEUBFO1Q0bfJxApeqecNbmaV763g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
      <script>
        
        var canvas = new fabric.Canvas('-costmise');
        canvas.setWidth(245);
        canvas.setHeight(383);
        canvas.top = 172;
        canvas.left = 106;


        // text
        var text = new fabric.IText('#juntos', {
          fontFamily: 'Arial',
          left: 0,
          top: 0,
          fontSize: 20,
          fill: '#ffffff',
          textAlign: 'center',
            
        });
          canvas.add(text);

        fabric.Image.fromURL('logo3.png', function(oImg) {
          oImg.scale(0.1)
         canvas.add(oImg);
        });
        
        

      </script>


    <script>
      /*
      let myparent = document.querySelector("#-costmise");
    // konva.js
     let second = document.querySelector('.second');
    var stage = new Konva.Stage({
      container: '-costmise',
      width: 245,
      height: 383
    });
    // add layer
    var layer = new Konva.Layer();
    var myimage = new Konva.Layer();
    stage.add(layer)
    stage.add(myimage)

     // function to calculate crop values from source image, its visible size and a crop strategy
     function getCrop(image, size, clipPosition = 'center-middle') {
        const width = size.width;
        const height = size.height;
        const aspectRatio = width / height;

        let newWidth;
        let newHeight;

        const imageRatio = image.width / image.height;

        if (aspectRatio >= imageRatio) {
          newWidth = image.width;
          newHeight = image.width / aspectRatio;
        } else {
          newWidth = image.height * aspectRatio;
          newHeight = image.height;
        }

        let x =  (image.width - newWidth) / 2;
        let y = (image.height - newHeight) / 2;
        return {
          cropX: x,
          cropY: y,
          cropWidth: newWidth,
          cropHeight: newHeight,
        };
      }

           // function to apply crop
      function applyCrop(pos) {
        const img = myimage.findOne('.image');
        img.setAttr('lastCropUsed', pos);
        const crop = getCrop(
          img.image(),
          { width: img.width(), height: img.height() },
          pos
        );
        img.setAttrs(crop);
      }
      Konva.Image.fromURL(
        './yoga.svg',
        (img) => {
          img.setAttrs({
            width: 500,
            height: 500,
            x: 0,
            y: 10,
            name: 'image',
            draggable: true,
            crossOrigin: 'anonymous',
            
            
          }
          );
         
         
          myimage.add(img);
          // apply default left-top crop
          applyCrop('center-middle');

          img.on('dblclick', () => {
            const tr = new Konva.Transformer({
            nodes: [img],
            keepRatio: true,
            boundBoxFunc: (oldBox, newBox) => {
              if (newBox.width < 10 || newBox.height < 10) {
                return oldBox;
              }
              return newBox;
            },
          });

          myimage.add(tr);
        
          });
          
          stage.on('click', () => {
            console.log('dblclick');
            if(myimage.findOne('Transformer') !== undefined){
              myimage.findOne('Transformer').destroy();
              myimage.draw();
            }
          });
        
          

          img.on('transform', () => {
            // reset scale on transform
            img.setAttrs({
              scaleX: 1,
              scaleY: 1,
              width: img.width() * img.scaleX(),
              height: img.height() * img.scaleY(),
            });
            applyCrop(img.getAttr('lastCropUsed'));
          });
        }
      );
     
      document.querySelector('#clip').onchange = (e) => {
        applyCrop(e.target.value);
      };

      

*/

    </script>

   
  </body>
</html>
